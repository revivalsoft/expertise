{#
  Estimations - Logiciel d'aide √† l'estimation de terrains
  Copyright (C) 2025 RevivalSoft
  
  Ce programme est un logiciel libre ; vous pouvez le redistribuer et/ou
  le modifier selon les termes de la Licence Publique G√©n√©rale GNU publi√©e
  par la Free Software Foundation Version 3.
  
  Ce programme est distribu√© dans l'espoir qu'il sera utile,
  mais SANS AUCUNE GARANTIE ; sans m√™me la garantie implicite de
  COMMERCIALISATION ou D‚ÄôAD√âQUATION √Ä UN BUT PARTICULIER. Voir la
  Licence Publique G√©n√©rale GNU pour plus de d√©tails.
  
  Vous devriez avoir re√ßu une copie de la Licence Publique G√©n√©rale GNU
  avec ce programme ; si ce n'est pas le cas, voir
  https://www.gnu.org/licenses/
#}
{% extends 'base.html.twig' %}

{% block title %}Outil d‚Äôestimation fonci√®re
{% endblock %}

{% block body %}
	<div
		class="container my-5">

		<!-- En-t√™te -->
		<div class="mb-5 text-center">
			<h1 class="display-4">Outil d‚Äôestimation de terrains constructibles</h1>
			<p class="lead">Analyse quantitative √† partir de donn√©es environnementales fournies au format CSV.</p>
		</div>

		{# Bouton vid√©o de pr√©sentation #}
			<div class="text-center mb-5">
				<a href="https://estimations.revivalsoft.com/videos/terraestimate.mp4" target="_blank" rel="noopener noreferrer" class="btn btn-lg btn-outline-primary">
				
					<i class="bi bi-play-btn-fill me-2"></i>Voir la vid√©o de pr√©sentation
					<i class="bi bi-box-arrow-up-right ms-2"></i>
				</a>
			</div>

		<!-- Pr√©sentation de l‚Äôoutil -->
		<div class="row mb-5">
			<div class="col-md-8 offset-md-2">
				<div class="card shadow-sm">
					<div class="card-body">
						<h3 class="h5">Principe</h3>
						<p>
							Cet outil permet d‚Äôestimer la valeur d‚Äôun terrain constructible en exploitant des donn√©es issues de parcelles comparables
																												(superficie, prix total) que vous fournissez sous forme de fichier CSV.
																												Le syst√®me applique plusieurs m√©thodes de calcul pour proposer une estimation coh√©rente et fiable.
						</p>

						<h3 class="h5 mt-4">Donn√©es attendues</h3>
						<ul>
							<li>Un fichier
								<strong>CSV</strong>
								contenant deux colonnes :
								<code>surface</code>
								(en m¬≤) et
								<code>prix</code>
								(en ‚Ç¨).</li>
							<li>Le fichier doit commencer par une ligne de titre et les donn√©es sont s√©par√©es par une virgule
								<button type="button" class="btn btn-info mb-3" data-bs-toggle="modal" data-bs-target="#csvExampleModal">
									Voir un exemple de fichier CSV
								</button>
							</li>
							<li>Les donn√©es doivent correspondre √† des ventes ou √©valuations de terrains similaires en termes de localisation, r√©glementation et contexte.</li>
							<li>Enfin, indiquer la surface en m2 du terrain √† √©valuer.</li>
						</ul>

						<h3 class="h5 mt-4">M√©thodes d‚Äôestimation propos√©es</h3>
						<ul>
							<li>
								<strong>R√©gression lin√©aire (<a href="{{ path('app_regression_lineaire_info') }}">voir explication</a>)</strong>
								: ajustement sur la tendance lin√©aire entre surface et prix.
							</li>
							<li>
								<strong>R√©gression logarithmique(<a href="{{ path('app_regression_logarithmique_info') }}">voir explication</a>)</strong>
								: mod√©lisation bas√©e sur la courbe logarithmique des prix en fonction des surfaces.
							</li>
							<li>
								<strong>R√©gression puissance(<a href="{{ path('app_regression_puissance_info') }}">voir explication</a>)</strong>
								: mod√®le non lin√©aire adapt√© √† la d√©croissance du prix au m¬≤ avec la taille.
							</li>
							<li>
								<strong>R√©gression locale pond√©r√©e (<a href="{{ path('app_lowess_info') }}">LOWESS</a>)</strong>
								: ajustement souple bas√© sur les points voisins pond√©r√©s pour mod√©liser les tendances locales.
							</li>
						</ul>

						<p class="mt-3">
							Ces diff√©rentes approches sont calcul√©es en parall√®le, affich√©es et compar√©es pour fournir une estimation fiable.
						</p>

						<div
							class="row justify-content-center g-4">
							<!-- Card GitHub -->
							<div class="col-12 col-md-6 col-lg-4">
								<div class="card text-center shadow-sm h-100" style="border-top: 4px solid #24292f;">
									<div class="card-body">
										<span class="badge bg-dark mb-2">GitHub</span>
										<img src="https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/github.svg" alt="GitHub" style="width: 40px; height: 40px; margin-bottom: 10px;">
										<h5 class="card-title">Code source disponible</h5>
										<p class="card-text">
											Retrouvez ce projet directement sur GitHub.
										</p>
										<a href="https://github.com/revivalsoft/expertise" target="_blank" rel="noopener noreferrer" class="btn btn-dark">
											<i class="bi bi-github"></i>
											Voir sur GitHub
										</a>
									</div>
								</div>
							</div>

							<!-- Card Docker -->
							<div class="col-12 col-md-6 col-lg-4">
								<div class="card text-center shadow-sm h-100" style="border-top: 4px solid #2496ed;">
									<div class="card-body">
										<span class="badge bg-primary mb-2">Docker</span>
										<img src="https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/docker.svg" alt="Docker" style="width: 40px; height: 40px; margin-bottom: 10px;">
										<h5 class="card-title">Image Docker disponible</h5>
										<p class="card-text">
											T√©l√©chargez et lancez facilement ce projet avec Docker.
										</p>
										<p>
											<a href="https://hub.docker.com/r/revivalsoft/terraestimate" target="_blank" rel="noopener noreferrer" class="btn btn-primary mt-2">
												<i class="bi bi-box-arrow-up-right"></i>
												Voir sur Docker Hub
											</a>
										</p>

										<div class="text-start" style="font-size: 0.9rem; word-break: break-word;">
											<div class="mb-2">
												<strong>1Ô∏è‚É£ Cr√©er le volume pour les uploads :</strong><br>
												<code id="cmd1">docker volume create terrauploads</code>
												<button class="btn btn-sm btn-outline-secondary ms-1 copy-btn" data-target="cmd1">Copier</button>
											</div>

											<div class="mb-2">
												<strong>2Ô∏è‚É£ Lancer le conteneur :</strong><br>
												<code id="cmd2">docker run -d -p 8082:80 --name terraestimate -v terrauploads:/var/www/html/public/uploads revivalsoft/terraestimate:latest</code>
												<button class="btn btn-sm btn-outline-secondary ms-1 copy-btn" data-target="cmd2">Copier</button>
											</div>
										</div>

										<!-- Bloc S√©curit√© -->
										<div class="alert alert-warning mt-3 text-start" style="font-size: 0.9rem;">
											<h6 class="fw-bold">‚ÑπÔ∏è S√©curit√© et mises √† jour</h6>
											<p>
												Cette image Docker est bas√©e sur une distribution Debian/Ubuntu et peut contenir des vuln√©rabilit√©s
																																																d√©couvertes au fil du temps. L‚Äôapplication reste utilisable, mais vous pouvez renforcer la s√©curit√©
																																																en reconstruisant localement l‚Äôimage avec les correctifs les plus r√©cents.
											</p>
											<ol>
												<li>T√©l√©chargez l‚Äôimage depuis Docker Hub :
													<br><code id="pull">docker pull revivalsoft/terraestimate:latest</code>
													<button class="btn btn-sm btn-outline-secondary ms-1 copy-btn" data-target="pull">Copier</button>
												</li>
												<li>Cr√©ez un fichier
													<code>Dockerfile</code>
													contenant :
													<pre><code id="dockerfile">FROM revivalsoft/terraestimate:latest
RUN apt-get update && apt-get upgrade -y \
    && rm -rf /var/lib/apt/lists/*</code></pre>
													<button class="btn btn-sm btn-outline-secondary ms-1 copy-btn" data-target="dockerfile">Copier</button>
												</li>
												<li>Rebuild l‚Äôimage corrig√©e :
													<br><code id="rebuild">docker build -t terraestimate:secure .</code>
													<button class="btn btn-sm btn-outline-secondary ms-1 copy-btn" data-target="rebuild">Copier</button>
												</li>
											</ol>
											<p class="mb-0">
												üëâ Vous pouvez aussi analyser l‚Äôimage avec un outil comme
												<a href="https://aquasecurity.github.io/trivy/" target="_blank" rel="noopener noreferrer">Trivy</a>
												avant et apr√®s rebuild pour v√©rifier l‚Äô√©tat de s√©curit√©.
											</p>
										</div>
									</div>
								</div>
							</div>
						</div>

						<script>
							document.querySelectorAll('.copy-btn').forEach(btn => {
btn.addEventListener('click', () => {
const targetId = btn.getAttribute('data-target');
const text = document.getElementById(targetId).innerText;
navigator.clipboard.writeText(text).then(() => {
const original = btn.innerText;
btn.innerText = 'Copi√© !';
btn.disabled = true;
setTimeout(() => {
btn.innerText = original;
btn.disabled = false;
}, 2000);
});
});
});
						</script>

						<div class="text-center mt-4">
							<a href="{{ path('csv_upload') }}" class="btn btn-primary btn-lg">Acc√©der √† l‚Äôoutil</a>
						</div>
					</div>
				</div>
			</div>
		</div>

	</div>

	<div class="modal fade" id="csvExampleModal" tabindex="-1" aria-labelledby="csvExampleLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="csvExampleLabel">Exemple de fichier CSV</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
				</div>
				<div class="modal-body">
					<p>Voici un exemple de fichier CSV avec les colonnes
						<strong>surface</strong>
						et
						<strong>prix</strong>
						:</p>
					<pre><code>surface,prix
405,40905
732,102480
281,12926
647,85404
483,95151</code></pre>
					<p>Assurez-vous d‚Äôenregistrer le fichier avec l'extension
						<code>.csv</code>
						et d'utiliser la
						<code>virgule</code>
						comme s√©parateur.</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
