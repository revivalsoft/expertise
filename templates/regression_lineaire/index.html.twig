{% extends 'base.html.twig' %}

{% block title %}Résultats de la régression
{% endblock %}

{% block body %}
	<div class="container my-5">
		<div class="row justify-content-center">
			<div class="col-lg-10">
				<div class="card shadow-sm border-0">
					<div class="card-header bg-primary text-white">
						<h5 class="mb-0">Résultats de la régression pour le fichier :
							{{ fichier }}</h5>
					</div>
					<div class="card-body">

						<div class="text-end mb-3">
							<a href="{{ path('csv_upload') }}" class="btn btn-outline-secondary">
								← Retour
							</a>
						</div>

						{% if estimation1 is defined %}
							<h5 class="text-secondary mb-3">Méthodes de calcul</h5>
							<ul class="list-group mb-4">
								<li class="list-group-item">
									<strong>Méthode directe :</strong>
									a₁ =
									{{ a1|number_format(4) }}, b₁ =
									{{ b1|number_format(2) }}
								</li>
								<li class="list-group-item">
									<strong>Méthode statistique :</strong>
									a₂ =
									{{ a2|number_format(4) }}, b₂ =
									{{ b2|number_format(2) }}, R² =
									{{ r2|number_format(4) }}
								</li>
								<li class="list-group-item">
									<strong>Méthode robuste :</strong>
									a₃ =
									{{ a3|number_format(4) }}, b₃ =
									{{ b3|number_format(2) }}
								</li>

								<li class="list-group-item">
									<strong>Méthode locale pondérée :
									</strong>Estimation =
									{{ estimation4 is not null ? estimation4 ~ ' €' : 'Non calculée' }}</li>

								<li class="list-group-item">
									<strong>Méthode logarithmique : :</strong>
									a₄ =
									{{ a4|number_format(4) }}, b₄ =
									{{ b4|number_format(2, '.', ' ') }}, Estimation =
									{{ estimation5 is not null ? estimation5 ~ ' €' : 'Non calculée' }}
								</li>

								<li class="list-group-item">
									<strong>Méthode puissance :</strong>
									a₅ =
									{{ a5|number_format(4, '.', ' ') }}, b₅ =
									{{ b5|number_format(4, '.', ' ') }}
								</li>


							</ul>

							<h5 class="text-secondary mb-3">Estimations pour la surface demandée ({{ surface }}
								m2)</h5>
							<ul class="list-group mb-4">
								<li class="list-group-item">
									<strong>Estimation par méthode directe :</strong>
									{{ estimation1 }}
									€
								</li>
								<li class="list-group-item">
									<strong>Estimation par méthode statistique :</strong>
									{{ estimation2 }}
									€
								</li>
								<li class="list-group-item">
									<strong>Estimation par méthode robuste :</strong>
									{{ estimation3 }}
									€
								</li>

								<li class="list-group-item">
									<strong>Estimation par méthode pondérée localement (LOWESS) :</strong>
									{{ estimation4 }}
									€
								</li>

								<li class="list-group-item">
									<strong>Estimation par méthode logarithmique : :</strong>
									{{ estimation5 }}
									€
								</li>

								<li class="list-group-item">
									<strong>Estimation par méthode puissance : :</strong>
									{{ estimation6|number_format(0, '', '') }}
									€
																																																						€
								</li>


							</ul>

							<div class="alert alert-success text-center">
								<h5 class="mb-0">⚖️ Moyenne des estimations :
									<strong>{{ estimationMoyenne }}
										€</strong>
								</h5>
							</div>
						{% else %}
							<div class="alert alert-danger">
								Aucune estimation n’a pu être réalisée. Veuillez vérifier que le fichier et la surface sont bien fournis.
							</div>
						{% endif %}
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
